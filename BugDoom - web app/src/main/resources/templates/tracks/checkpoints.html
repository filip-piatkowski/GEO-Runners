<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.w3.org/1999/xhtml"
      layout:decorate="~{fragments/main_view}">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
        integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
        crossorigin=""/>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet"
        type="text/css"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
  <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
          crossorigin="anonymous"/>

  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
          integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM="
          crossorigin=""></script>

  <script
          src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
          crossorigin="anonymous"></script>

  <title>Checkpoints</title>
  <style>#map { height: 600px; }</style>
</head>
<body>
<div layout:fragment ="content" class="container text-left">
  <table id="data-table">
  <div id="map" class="container"></div>
    <form th:action="@{/tracks}" th:object="${track}" method="post">
  <tr>
    <th scope="col-4">Szerokość</th>
    <th scope="col-4">Długość</th>
    <th scope="col-4">Point Name</th>
  </tr>
    </form>
  </table>

  <script th:inline="javascript">
    var options = {center: [54.349, 18.651],zoom: 12}
    var map = L.map('map', options);

    L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 20,
      attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    }).addTo(map);


    function onMapClick(e) {
      var coord = e.latlng;
      var lat = coord.lat;
      var lng = coord.lng;
      var customPopup = ("szerokość " +lat +" długość " + lng) +
              "<button class=\"fas fa-trash\" type=\"reset\">usuń</button>"
      ;

      var customOptions =
              {
                'maxWidth': '400',
                'width': '200',
                'className' : 'popupCustom'
              }

      var marker = L.marker([lat,lng]).bindPopup(customPopup,customOptions);
      marker.addTo(map);
    }

    map.on('click', onMapClick);

  </script>

  <a href="/tracks" class="btn btn-primary"><i class="fas fa-angle-double-left"></i> Powrót do listy tras</a>
</div>

</body>
</html>